<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"
  xmlns:atom="http://www.w3.org/2005/Atom"
  xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>leejs&#39;s blog</title>
    <link>https://dl137584.github.io/</link>
    
    <atom:link href="https://dl137584.github.io/rss2.xml" rel="self" type="application/rss+xml"/>
    
    <description></description>
    <pubDate>Tue, 01 Feb 2022 08:47:14 GMT</pubDate>
    <generator>http://hexo.io/</generator>
    
    <item>
      <title>[And] Glide에서 비트맵 이미지가 GC되는 과정</title>
      <link>https://dl137584.github.io/2022/02/01/004-Glide%EC%97%90%EC%84%9C-%EB%B9%84%ED%8A%B8%EB%A7%B5-%EC%9D%B4%EB%AF%B8%EC%A7%80%EA%B0%80-GC%EB%90%98%EB%8A%94-%EA%B3%BC%EC%A0%95/</link>
      <guid>https://dl137584.github.io/2022/02/01/004-Glide%EC%97%90%EC%84%9C-%EB%B9%84%ED%8A%B8%EB%A7%B5-%EC%9D%B4%EB%AF%B8%EC%A7%80%EA%B0%80-GC%EB%90%98%EB%8A%94-%EA%B3%BC%EC%A0%95/</guid>
      <pubDate>Tue, 01 Feb 2022 08:26:47 GMT</pubDate>
      
        
        
      <description>&lt;h1 id=&quot;개요&quot;&gt;&lt;a href=&quot;#개요&quot; class=&quot;headerlink&quot; title=&quot;개요&quot;&gt;&lt;/a&gt;개요&lt;/h1&gt;&lt;p&gt;위의 공식 문서에서 나와있는 바와 같이 기본적으로 Glide로 비트맵을 관리하는 걸 추천하고 있다.&lt;/p&gt;
&lt;p&gt;&lt;img sr</description>
        
      
      
      
      <content:encoded><![CDATA[<h1 id="개요"><a href="#개요" class="headerlink" title="개요"></a>개요</h1><p>위의 공식 문서에서 나와있는 바와 같이 기본적으로 Glide로 비트맵을 관리하는 걸 추천하고 있다.</p><p><img src="/assets/images/4_bitmap_gc_in_glide_1.png"></p><p>이를 관리해줘야 하는 이유는 다음과 같다.</p><blockquote><p>앱에서 대량의 비트맵 데이터를 표시하면 OutOfMemoryError 오류가 발생할 수 있습니다.</p></blockquote><p>OutOfMemory 오류를 방지하기 위하여 안드로이드에서는 <a href="https://developer.android.com/reference/android/graphics/Bitmap?hl=ko#recycle()">recycle()</a> 기능을 제공하는데, 이 메소드를 실행하면 비트맵에 사용한 메모리를 회수할 수 있다. 즉, 이 메소드를 호출함으로써 해당 비트맵은 GC의 대상이 된다. 당연히 해당 비트맵을 더이상 사용하지 않을 거라고 확정된 시점에 호출해야한다.</p><br><h1 id="Glide는-비트맵의-메모리를-어떻게-관리하고-있는가"><a href="#Glide는-비트맵의-메모리를-어떻게-관리하고-있는가" class="headerlink" title="Glide는 비트맵의 메모리를 어떻게 관리하고 있는가?"></a>Glide는 비트맵의 메모리를 어떻게 관리하고 있는가?</h1><p>위와 같은 방법으로 오류를 해결하긴 했으나 정확히 Glide에서 Bitmap의 메모리 관리를 어떻게 하는지 감이 안 잡혔더랬다. 그래서 참고삼아 다음 내용을 같이 살펴보면 좋을 것 같다.</p><p>잘 살펴보면 위의 오류 내용을 담은 스샷에서 LruResourceCache 와 같은 단어를 볼 수 있다. <a href="https://www.notion.so/vs-afbdf4b7739647969997e16fd79e7507">메모리 캐시 vs 디스크 캐시</a> 의 내용에 따르면 <code>비트맵 캐싱은 LruCache를 사용하는 대표적인 예</code>다. 여기서 힌트를 얻어서 Glide를 적용하면서 설정했던 BitmapPool 사이즈 디폴트값을 보자. 관련 코드는 다음과 같다.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 비트맵 풀: The default size is based on the screen size and density of the device</span></span><br><span class="line"><span class="keyword">int</span> bitmapPoolSizeBytes = <span class="number">1024</span> * <span class="number">1024</span> * <span class="number">30</span>; <span class="comment">// 30mb</span></span><br><span class="line">builder.setBitmapPool(<span class="keyword">new</span> LruBitmapPool(bitmapPoolSizeBytes));</span><br></pre></td></tr></table></figure><p>BitmapPool 사이즈는 단말의 스크린사이즈와 density 값에 따라 달라진다고 나와있다.</p><br><h1 id="Glide에서-Bitmap의-라이프사이클-링크"><a href="#Glide에서-Bitmap의-라이프사이클-링크" class="headerlink" title="Glide에서 Bitmap의 라이프사이클 링크"></a>Glide에서 Bitmap의 라이프사이클 <a href="https://github.com/bumptech/glide/issues/483#issuecomment-108193950">링크</a></h1><p>Glide에서 비트맵을 관리하는 데에 있어 일반적인 생명주기는 다음과 같다.</p><p><strong>InputStream -&gt; Bitmap -&gt; View -&gt; Memory Cache -&gt; Bitmap Pool -&gt; Recycle</strong></p><h2 id="해당-링크-해석본"><a href="#해당-링크-해석본" class="headerlink" title="해당 링크 해석본"></a>해당 링크 해석본</h2><p>비트맵은 메모리 캐시 또는 BitmapPool에서 View(또는 target) 및 Loop로 이동할 수도 있습니다. 디코딩 파이프 라인 (예 : 변환을 통해) 중에 리소스를 수동으로 재활용하는 경우 비트맵이 표시되지 않고 recycled state가 될 수도 있습니다. 그렇지 않으면 비트맵이 크기 제약으로 인해 제거될 때 메모리 캐시에서 BitmapPool로, BitmapPool에서 recycled state로 이동합니다.</p><p>“Cannot obtain size for recycled Bitmap” 오류는 Recycle state에 도달한 비트맵을 그리려고 할 때 발생합니다. 결코 발생해서는 안되지만 다음과 같은 몇 가지 시나리오에서 발생할 수 있습니다.</p><ol><li><p>변환 중에 디코딩 프로세스 중에 비트맵을 수동으로 recycle할 경우</p><p> 이 원인은 일반적이지 않은 브랜치에서 커스텀 변환을 하지 않는 한 이런 상황을 꽤 자주 볼 수 있습니다.</p></li><li><p>디코딩 프로세스 중, 변환 중에 두 번 이상 Pool에 비트맵을 반환한 경우</p><p> 이 경우 문제의 원인을 파악하기 쉽습니다. 비트맵이 Pool에서 제거되지 않고 Pool에 여러 번 추가되면 다른 이미지가 동시에 표시되어, 두 개의 이미지 중 하나는 올바르게 표시되고 다른 하나는 잘못 표시 될 수 있습니다. 게다가 다른 뷰에서 참조하는 동안 동시에 recycle 될 수도 있습니다.</p></li><li><p>onLoadCleared가 호출된 후에도 계속 리소스를 참조하거나, 또는 해당 Target이 지워진 후 Target에 로드된 리소스를 참조한 경우</p><p> 커스텀 target을 사용하는 경우 발생할 수 있습니다.</p></li></ol><p>안타깝게도 비트맵을 추적하기 위해 수동 참조 계산을 수행해야하므로 이러한 종류의 버그를 추적하는 것이 매우 어려울 수 있습니다.<br>BitmapPool의 크기를 크게 줄이거나 BitmapPoolAdapter를 사용하여 충돌이 더 자주 발생하는지 확인하십시오. 메모리 캐시의 크기를 줄일 수도 있습니다. 두 경우 모두 파이프 라인의 길이를 줄입니다. 이는 Bitmap이 Recycled state에 더 빨리 도달하여 오류가 더 자주 발생할 수 있음을 의미합니다. 또한 비트맵 렌더링 오류, 기록 된 GL 경고 또는 다른 이미지 대신 잘못된 이미지가 나타나는지 주시하십시오. 이 모든 것은 버그를 재현한 신호입니다.</p><br><h1 id="결론"><a href="#결론" class="headerlink" title="결론"></a>결론</h1><p>따라서 Glide는 변환된 Bitmap을 내부적으로 recycle하기 때문에 <code>imageView.setRecycler()</code>하지 않아도 된다.</p>]]></content:encoded>
      
      
      <category domain="https://dl137584.github.io/categories/Android/">Android</category>
      
      
      
      <comments>https://dl137584.github.io/2022/02/01/004-Glide%EC%97%90%EC%84%9C-%EB%B9%84%ED%8A%B8%EB%A7%B5-%EC%9D%B4%EB%AF%B8%EC%A7%80%EA%B0%80-GC%EB%90%98%EB%8A%94-%EA%B3%BC%EC%A0%95/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>[And] 웹뷰에서 동작하는 페이스북 로그인이 deprecated됨</title>
      <link>https://dl137584.github.io/2022/02/01/003-%EC%9B%B9%EB%B7%B0%EC%97%90%EC%84%9C-%EB%8F%99%EC%9E%91%ED%95%98%EB%8A%94-%ED%8E%98%EC%9D%B4%EC%8A%A4%EB%B6%81-%EB%A1%9C%EA%B7%B8%EC%9D%B8%EC%9D%B4-deprecated%EB%90%A8/</link>
      <guid>https://dl137584.github.io/2022/02/01/003-%EC%9B%B9%EB%B7%B0%EC%97%90%EC%84%9C-%EB%8F%99%EC%9E%91%ED%95%98%EB%8A%94-%ED%8E%98%EC%9D%B4%EC%8A%A4%EB%B6%81-%EB%A1%9C%EA%B7%B8%EC%9D%B8%EC%9D%B4-deprecated%EB%90%A8/</guid>
      <pubDate>Tue, 01 Feb 2022 05:59:31 GMT</pubDate>
      
        
        
      <description>&lt;h1 id=&quot;1-공지-전문&quot;&gt;&lt;a href=&quot;#1-공지-전문&quot; class=&quot;headerlink&quot; title=&quot;1. 공지 전문&quot;&gt;&lt;/a&gt;1. 공지 전문&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;/assets/images/3_facebook_login_deprec</description>
        
      
      
      
      <content:encoded><![CDATA[<h1 id="1-공지-전문"><a href="#1-공지-전문" class="headerlink" title="1. 공지 전문"></a>1. 공지 전문</h1><p><img src="/assets/images/3_facebook_login_deprecated_1.png"></p><h3 id="1-관련-문의-및-공식답변-링크"><a href="#1-관련-문의-및-공식답변-링크" class="headerlink" title="(1) 관련 문의 및 공식답변 링크"></a>(1) 관련 문의 및 공식답변 <a href="https://developers.facebook.com/support/bugs/4703185519702331/?join_id=f2cb01cbae6d066">링크</a></h3><p><img src="/assets/images/3_facebook_login_deprecated_2.png"></p><blockquote><p>안녕하세요 철구 님, 자세한 내용에 감사드립니다.<br>로그 파일에서 ‘PLATFORM__LOGIN_DISABLED_FROM_WEBVIEW_OLD_SDK_VERSION’ 오류 코드를 확인할 수 있습니다. Android 웹뷰를 통한 Facebook 로그인(<a href="https://developers.facebook.com/blog/post/2021/06/28/deprecating-support-fb-login-authentication-android-embedded-browsers/">https://developers.facebook.com/blog/post/2021/06/28/deprecating-support-fb-login-authentication-android-embedded-browsers/</a>)이 중단되었기 때문에 발생한 것으로 보입니다.<br>대신 이 <a href="https://developers.facebook.com/docs/facebook-login/android/deprecating-webviews">링크</a>를 통해 사용자 지정 탭을 적용하는 자세한 지침을 확인할 수 있습니다.<br>만약 문제가 지속된다면 사용 중인 SDK 버전과 영어로 표시된 오류 메시지 스크린숏과 함께 오류를 재현할 수 있도록 샘플 프로젝트를 제공 부탁드립니다.<br>감사합니다.</p></blockquote><h1 id="2-공식-해결-가이드"><a href="#2-공식-해결-가이드" class="headerlink" title="2. 공식 해결 가이드"></a>2. 공식 해결 가이드</h1><h3 id="1-페이스북-SDK-버전이-8-2-이상인지-확인"><a href="#1-페이스북-SDK-버전이-8-2-이상인지-확인" class="headerlink" title="(1) 페이스북 SDK 버전이 8.2 이상인지 확인"></a>(1) 페이스북 SDK 버전이 8.2 이상인지 확인</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">implementation &#x27;com.facebook.android:facebook-android=sdk:8.2.0&#x27;</span><br></pre></td></tr></table></figure><h3 id="2-수정사항"><a href="#2-수정사항" class="headerlink" title="(2) 수정사항"></a>(2) 수정사항</h3><p>앱 내부 웹뷰가 아닌 외부 브라우저를 통해 페이스북 로그인 진행하도록 변경</p><p>2021년 10월 5일부터 Facebook 로그인은 사용자 로그인에 Android 내장 브라우저(WebView) 사용을 더 이상 지원하지 않습니다. 사용자 경험이 중단되지 않도록 하려면 다음 체크리스트를 사용하여 대신 사용자 지정 탭을 사용하십시오.</p><h1 id="3-결론"><a href="#3-결론" class="headerlink" title="3. 결론"></a>3. 결론</h1><p>웹뷰를 통해 페이스북 로그인 페이지에 접근하면 안 되며, 외부 브라우저를 띄워 페이스북 로그인 페이지에 접근하도록 수정해야 한다.</p>]]></content:encoded>
      
      
      <category domain="https://dl137584.github.io/categories/Android/">Android</category>
      
      
      
      <comments>https://dl137584.github.io/2022/02/01/003-%EC%9B%B9%EB%B7%B0%EC%97%90%EC%84%9C-%EB%8F%99%EC%9E%91%ED%95%98%EB%8A%94-%ED%8E%98%EC%9D%B4%EC%8A%A4%EB%B6%81-%EB%A1%9C%EA%B7%B8%EC%9D%B8%EC%9D%B4-deprecated%EB%90%A8/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>[And] JCenter 지원종료</title>
      <link>https://dl137584.github.io/2022/01/31/002-JCenter-%EC%A7%80%EC%9B%90%EC%A2%85%EB%A3%8C/</link>
      <guid>https://dl137584.github.io/2022/01/31/002-JCenter-%EC%A7%80%EC%9B%90%EC%A2%85%EB%A3%8C/</guid>
      <pubDate>Mon, 31 Jan 2022 06:30:00 GMT</pubDate>
      
        
        
      <description>&lt;h1 id=&quot;현재-상황-2021년-후반&quot;&gt;&lt;a href=&quot;#현재-상황-2021년-후반&quot; class=&quot;headerlink&quot; title=&quot;현재 상황(2021년 후반)&quot;&gt;&lt;/a&gt;&lt;strong&gt;현재 상황(2021년 후반)&lt;/strong&gt;&lt;/h1&gt;&lt;p&gt;&lt;a </description>
        
      
      
      
      <content:encoded><![CDATA[<h1 id="현재-상황-2021년-후반"><a href="#현재-상황-2021년-후반" class="headerlink" title="현재 상황(2021년 후반)"></a><strong>현재 상황(2021년 후반)</strong></h1><p><a href="https://blog.gradle.org/jcenter-shutdown">[Gradle] JCenter shutdown impact on Gradle builds</a>에 따르면 JFrog에서 아래와 같이 공지했다고 한다.</p><ul><li>JCenter는 read-only로 계속 제공될 것이나</li><li>더이상 새로운 버전의 패키지는 받을 수 없다.</li><li>모든 Bintray 서비스(JCenter에 배포하기 위한 플랫폼는 중지되었다.</li></ul><br>   <hr><br><h2 id="JCenter-지원중단-시-상황-2021년-초중반"><a href="#JCenter-지원중단-시-상황-2021년-초중반" class="headerlink" title="JCenter 지원중단 시 상황(2021년 초중반)"></a>JCenter 지원중단 시 상황(2021년 초중반)</h2><ul><li><a href="https://news.hada.io/topic?id=3737">지원종료공지요약</a> (<a href="https://jfrog.com/blog/into-the-sunset-bintray-jcenter-gocenter-and-chartcenter/">공지원문</a>)</li></ul><blockquote><p>JFrog에서 운영하는 JCenter, GoCenter 및 ChartCenter가 운영을 중지할 예정이다.</p><p>2021년 2월 28일 : GoCenter, ChartCenter에 라이브러리 등록 서비스 중지</p><p>2021년 3월 31일 : JCenter에 라이브러리 등록 서비스 중지</p><p>2021년 5월 1일 : GoCenter, ChartCenter에서 라이브러리 다운로드 서비스 중지</p><p>2022년 2월 1일 : JCenter에서 라이브러리 다운로드 서비스 중지</p></blockquote><p>이유는 위의 요약링크에서 토론에서 말하기를</p><p><a href="https://github.com/google/ExoPlayer/issues/5246#issuecomment-748687665">ExoPlayer의 issue</a>에서 언급되기를, JCenter에서 악성코드가 포함된 라이브러리 패키지가 등록된 사고가 있었다고 하며, 이러한 사고방지 대책을 세우지 못하고 서비스를 닫는 것으로 보인다.</p><p>안드로이드 라이브러리는 JCenter에 의존한 게 많은데 따라서 대책을 세워야 한다. JCenter는 아래와 같이 레포지토리에 등록되어있다.</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">repositories &#123;</span><br><span class="line">    google()</span><br><span class="line">    mavenCentral()</span><br><span class="line">    jcenter()</span><br><span class="line">    maven &#123; url &#x27;https://maven.fabric.io/public&#x27; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>또한 이 JCenter 지원 종료에 대한 안드로이드 공식 입장은 다음과 같다.</p><blockquote><p>2022년 2월 1일까지 JCenter에서 기존 아티팩트를 다운로드할 수 있습니다. - <a href="https://developer.android.com/studio/build/jcenter-migration?hl=ko">공식 문서</a></p></blockquote><p>이에 관하여 추후에 또다른 공지가 올라올 예정이다.</p>]]></content:encoded>
      
      
      <category domain="https://dl137584.github.io/categories/Android/">Android</category>
      
      
      
      <comments>https://dl137584.github.io/2022/01/31/002-JCenter-%EC%A7%80%EC%9B%90%EC%A2%85%EB%A3%8C/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Hello World</title>
      <link>https://dl137584.github.io/2022/01/31/hello-world/</link>
      <guid>https://dl137584.github.io/2022/01/31/hello-world/</guid>
      <pubDate>Mon, 31 Jan 2022 04:54:56 GMT</pubDate>
      
        
        
      <description>&lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot;&gt;documentation&lt;/a&gt; for</description>
        
      
      
      
      <content:encoded><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content:encoded>
      
      
      
      
      <comments>https://dl137584.github.io/2022/01/31/hello-world/#disqus_thread</comments>
      
    </item>
    
  </channel>
</rss>
